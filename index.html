<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Compliance Hub - Collaborative Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #001f5a 0%, #000c36 100%);
            min-height: 100vh;
            color: #000000;
        }

        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 15px 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 31, 90, 0.1);
            border: 1px solid #e7f1fc;
        }

        .top-bar-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            height: 40px;
            max-width: 120px;
            object-fit: contain;
        }

        .app-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #001f5a;
        }

        .top-bar-center {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .notification-bell {
            position: relative;
            background: #f8f9fa;
            border: 1px solid #e7f1fc;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .notification-bell:hover {
            background: #001f5a;
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f56565;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border: 1px solid #e7f1fc;
            border-radius: 25px;
            padding: 8px 16px;
            min-width: 300px;
        }

        .search-bar input {
            border: none;
            background: transparent;
            outline: none;
            flex: 1;
            margin-left: 8px;
            font-size: 0.9rem;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .profile-picture {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #001f5a 0%, #2662fc 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 0.9rem;
            border: 2px solid #e7f1fc;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-size: 0.9rem;
            font-weight: 500;
            color: #001f5a;
            margin-bottom: 2px;
        }

        .user-role {
            font-size: 0.8rem;
            color: #0f3db5;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 31, 90, 0.15);
            border: 1px solid #e7f1fc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #001f5a;
            margin-bottom: 10px;
        }

        .header-content p {
            font-size: 1.1rem;
            color: #0f3db5;
            line-height: 1.6;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .action-button {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-button.primary {
            background: #001f5a;
            color: white;
        }

        .action-button.primary:hover {
            background: #0f3db5;
            transform: translateY(-2px);
        }

        .action-button.secondary {
            background: transparent;
            color: #001f5a;
            border: 2px solid #001f5a;
        }

        .action-button.secondary:hover {
            background: #001f5a;
            color: white;
        }

        .tab-container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 31, 90, 0.15);
            border: 1px solid #e7f1fc;
        }

        .tab-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e7f1fc;
            padding-bottom: 10px;
        }

        .tab-button {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: #0f3db5;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-button:hover {
            background: rgba(15, 61, 181, 0.1);
            color: #001f5a;
        }

        .tab-button.active {
            color: #ffffff;
            background: #001f5a;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: linear-gradient(90deg, #2662fc, #00c2ff);
            border-radius: 2px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-grid-three {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 31, 90, 0.1);
            border: 1px solid #e7f1fc;
        }

        .content-card.full-width {
            grid-column: 1 / -1;
        }

        .content-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #001f5a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #e7f1fc;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 31, 90, 0.1);
        }

        .task-item.high-priority {
            border-left-color: #f56565;
        }

        .task-item.medium-priority {
            border-left-color: #ed8936;
        }

        .task-item.low-priority {
            border-left-color: #48bb78;
        }

        .task-checkbox {
            margin-right: 15px;
            margin-top: 2px;
        }

        .task-details {
            flex: 1;
        }

        .task-title {
            font-size: 1rem;
            font-weight: 600;
            color: #001f5a;
            margin-bottom: 5px;
        }

        .task-description {
            font-size: 0.9rem;
            color: #0f3db5;
            margin-bottom: 10px;
        }

        .task-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.8rem;
            color: #6b7280;
        }

        .task-assignee {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .assignee-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #001f5a;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .task-actions {
            display: flex;
            gap: 10px;
            margin-left: 15px;
        }

        .task-action-btn {
            padding: 8px 12px;
            border: 1px solid #e7f1fc;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .task-action-btn:hover {
            background: #001f5a;
            color: white;
        }

        .create-task-form {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #001f5a;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e7f1fc;
            border-radius: 8px;
            font-size: 0.9rem;
            background: white;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .comment-section {
            border-top: 1px solid #e7f1fc;
            padding-top: 15px;
            margin-top: 20px;
        }

        .comment-item {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #001f5a;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .comment-content {
            flex: 1;
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .comment-author {
            font-weight: 500;
            color: #001f5a;
            font-size: 0.9rem;
        }

        .comment-time {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .comment-text {
            font-size: 0.9rem;
            color: #374151;
        }

        .add-comment {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }

        .add-comment input {
            flex: 1;
            padding: 10px;
            border: 1px solid #e7f1fc;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .team-member-card {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #001f5a, #2662fc);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 15px;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-weight: 600;
            color: #001f5a;
            margin-bottom: 2px;
        }

        .member-role {
            font-size: 0.85rem;
            color: #0f3db5;
            margin-bottom: 5px;
        }

        .member-status {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-online { background: #48bb78; }
        .status-away { background: #ed8936; }
        .status-offline { background: #9ca3af; }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 31, 90, 0.1);
            transition: transform 0.3s ease;
            border: 1px solid #e7f1fc;
            text-align: center;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #001f5a;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #0f3db5;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .priority-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .priority-high { background: #fecaca; color: #dc2626; }
        .priority-medium { background: #fed7aa; color: #ea580c; }
        .priority-low { background: #bbf7d0; color: #059669; }

        .document-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .document-item:hover {
            background: #e5e7eb;
            transform: translateX(5px);
        }

        .document-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            color: #001f5a;
        }

        .document-info {
            flex: 1;
        }

        .document-name {
            font-weight: 500;
            color: #001f5a;
            margin-bottom: 5px;
        }

        .document-meta {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .document-actions {
            display: flex;
            gap: 8px;
        }

        .doc-action-btn {
            padding: 6px 12px;
            border: 1px solid #e7f1fc;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .doc-action-btn:hover {
            background: #001f5a;
            color: white;
        }

        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            padding: 15px 0;
            border-bottom: 1px solid #e7f1fc;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #001f5a;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 0.9rem;
            color: #374151;
            margin-bottom: 5px;
        }

        .activity-time {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .placeholder-content {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }

        .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .placeholder-text {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .placeholder-subtext {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .content-grid-three {
                grid-template-columns: 1fr;
            }
            
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .quick-stats {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .top-bar {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-bar {
                min-width: 100%;
            }
        }
    </style>
    <style>
    #parser .content-card {
    max-width: 900px;
    margin: 30px auto;
    background: rgba(255,255,255,0.95);
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    overflow: hidden;
    backdrop-filter: blur(10px);
    border: none;
    }
    #parser .main-content {
    padding: 40px 30px;
    }
    #parser .upload-section {
    text-align: center;
    margin-bottom: 40px;
    }
    #parser .upload-section h5 {
    color: #4a5568;
    margin-bottom: 20px;
    font-size: 1.5rem;
    font-weight: 500;
    }
    #parser .file-upload-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    padding: 20px 40px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    min-width: 300px;
    box-shadow: 0 4px 15px rgba(102,126,234,0.4);
    }
    #parser .file-upload-label:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102,126,234,0.6);
    }
    #parser .file-upload-label svg {
    width: 24px;
    height: 24px;
    }
    #parser .file-name {
    margin-top: 15px;
    padding: 10px 20px;
    background: #f7fafc;
    border-radius: 10px;
    color: #4a5568;
    font-weight: 500;
    display: none;
    }
    #parser .upload-btn {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    border: none;
    padding: 15px 40px;
    border-radius: 50px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 20px;
    box-shadow: 0 4px 15px rgba(72,187,120,0.4);
    }
    #parser .upload-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(72,187,120,0.6);
    }
    #parser .upload-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    }
    #parser .supported-formats {
    margin-top: 20px;
    color: #718096;
    font-size: 0.9rem;
    }
    #parser .supported-formats strong {
    color: #4a5568;
    }
    #parser .loading {
    display: none;
    text-align: center;
    margin: 20px 0;
    }
    #parser .spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #667eea;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px;
    }
    @keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
    }
    #parser .results-section {
    display: none;
    margin-top: 40px;
    }
    #parser .results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e2e8f0;
    }
    #parser .results-title {
    color: #4a5568;
    font-size: 1.2rem;
    font-weight: 600;
    }
    #parser .download-btn {
    background: linear-gradient(135deg, #ed64a6 0%, #d53f8c 100%);
    color: white;
    padding: 12px 25px;
    border-radius: 25px;
    font-weight: 500;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(237,100,166,0.4);
    cursor: pointer;
    border: none;
    font-size: 0.97rem;
    }
    #parser .download-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(237,100,166,0.6);
    color: white;
    }
    #parser .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
    }
    #parser .stat-card {
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    border: 1px solid #e2e8f0;
    font-size: 1rem;
    }
    #parser .stat-number {
    font-size: 2rem;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
    }
    #parser .stat-label {
    color: #718096;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    }
    #parser .report-content {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 15px;
    padding: 25px;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.6;
    white-space: pre-wrap;
    max-height: 500px;
    overflow-y: auto;
    color: #495057;
    }
    #parser .error-message {
    background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
    color: #c53030;
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
    border-left: 5px solid #e53e3e;
    }
    #parser .success-message {
    background: linear-gradient(135deg, #c6f6d5 0%, #9ae6b4 100%);
    color: #2d7d42;
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
    border-left: 5px solid #38a169;
    }
    #parser .security-note {
    background: linear-gradient(135deg, #bee3f8 0%, #90cdf4 100%);
    color: #2c5282;
    padding: 20px;
    border-radius: 15px;
    margin-top: 30px;
    border-left: 5px solid #3182ce;
    font-size: 0.93rem;
    }
    #parser .security-note h3 {
    margin-bottom: 10px;
    color: #2d3748;
    }
    @media (max-width: 920px) {
    #parser .content-card { max-width: 98vw; }
    #parser .main-content { padding: 30px 12px;}
    }
    @media (max-width: 768px) {
    #parser .main-content {
        padding: 30px 10px;
    }
    #parser .upload-section { margin-bottom: 25px; }
    #parser .file-upload-label {
        min-width: 200px;
        padding: 15px 12px;
        font-size:1rem;
    }
    #parser .stats-grid { grid-template-columns: 1fr 1fr; }
    #parser .results-header { flex-direction:column; gap:10px; text-align:center;}
    }
    @media (max-width: 480px) {
    #parser .stats-grid { grid-template-columns: 1fr;}
    }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Top Navigation Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <img src="BR-Logo-RGB-Blue.png" alt="Broadridge Logo" class="logo">
                <div class="app-title">AI Compliance Hub</div>
            </div>
            <div class="top-bar-center">
                <div class="notification-bell">
                    🔔
                    <div class="notification-badge">3</div>
                </div>
                <div class="search-bar">
                    🔍
                    <input type="text" placeholder="Search tasks, documents, team members...">
                </div>
            </div>
            <div class="top-bar-right">
                <div class="user-profile">
                    <div class="profile-picture">JD</div>
                    <div class="user-info">
                        <div class="user-name">John Doe</div>
                        <div class="user-role">Chief Compliance Officer</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header with Actions -->
        <div class="header">
            <div class="header-content">
                <h1>AI Compliance Hub</h1>
                <p>Collaborative platform for compliance teams to manage tasks, documents, and regulatory requirements</p>
            </div>
            <div class="header-actions">
                <button class="action-button secondary" onclick="showCreateTaskModal()">
                    ➕ Assign Task
                </button>
                <button class="action-button primary" onclick="showUploadModal()">
                    📁 Upload Document
                </button>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="stat-card">
                <div class="stat-value">12</div>
                <div class="stat-label">My Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">47</div>
                <div class="stat-label">Team Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">8</div>
                <div class="stat-label">Pending Reviews</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">23</div>
                <div class="stat-label">Documents</div>
            </div>
        </div>

        <!-- Main Tab Container -->
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('my-tasks')">
                    My Tasks
                </button>
                <button class="tab-button" onclick="showTab('team-tasks')">
                    Team Tasks
                </button>
                <button class="tab-button" onclick="showTab('documents')">
                    Documents
                </button>
                <button class="tab-button" onclick="showTab('team')">
                    Team
                </button>
                <button class="tab-button" onclick="showTab('parser')">
                    Parser
                </button>
                <button class="tab-button" onclick="showTab('chatbot')">
                    AI Assistant
                </button>
                <button class="tab-button" onclick="showTab('panels')">
                    Panels
                </button>
            </div>

            <!-- My Tasks Tab -->
            <div id="my-tasks" class="tab-content active">
                <div class="content-grid">
                    <div class="content-card">
                        <h3>🎯 Active Tasks</h3>
                        <div class="task-item high-priority">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-details">
                                <div class="task-title">Review GDPR Compliance Report</div>
                                <div class="task-description">Review the updated GDPR compliance report for Q2 2024 and provide feedback</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-high">High</span>
                                    <span>Due: Apr 25, 2024</span>
                                    <div class="task-assignee">
                                        <span>From:</span>
                                        <div class="assignee-avatar">SM</div>
                                        <span>Sarah Miller</span>
                                    </div>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-btn">💬 Comment</button>
                                <button class="task-action-btn">📎 Attach</button>
                            </div>
                        </div>

                        <div class="task-item medium-priority">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-details">
                                <div class="task-title">Update AI Risk Assessment Framework</div>
                                <div class="task-description">Incorporate new EU AI Act requirements into our risk assessment framework</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-medium">Medium</span>
                                    <span>Due: Apr 28, 2024</span>
                                    <div class="task-assignee">
                                        <span>From:</span>
                                        <div class="assignee-avatar">MJ</div>
                                        <span>Mike Johnson</span>
                                    </div>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-btn">💬 Comment</button>
                                <button class="task-action-btn">📎 Attach</button>
                            </div>
                        </div>

                        <div class="task-item low-priority">
                            <input type="checkbox" class="task-checkbox" checked>
                            <div class="task-details">
                                <div class="task-title">Complete Vendor Assessment</div>
                                <div class="task-description">Assess new AI vendor compliance with our requirements</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-low">Low</span>
                                    <span>Completed: Apr 20, 2024</span>
                                    <div class="task-assignee">
                                        <span>From:</span>
                                        <div class="assignee-avatar">AL</div>
                                        <span>Alex Lee</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3>💬 Recent Comments</h3>
                        <div class="comment-section">
                            <div class="comment-item">
                                <div class="comment-avatar">SM</div>
                                <div class="comment-content">
                                    <div class="comment-header">
                                        <span class="comment-author">Sarah Miller</span>
                                        <span class="comment-time">2 hours ago</span>
                                    </div>
                                    <div class="comment-text">
                                        I've uploaded the updated GDPR report. Please focus on sections 3-5 for the high-risk AI systems.
                                    </div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">MJ</div>
                                <div class="comment-content">
                                    <div class="comment-header">
                                        <span class="comment-author">Mike Johnson</span>
                                        <span class="comment-time">4 hours ago</span>
                                    </div>
                                    <div class="comment-text">
                                        Great work on the vendor assessment! The documentation looks comprehensive.
                                    </div>
                                </div>
                            </div>
                            <div class="add-comment">
                                <input type="text" placeholder="Add a comment...">
                                <button class="action-button primary">Post</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Tasks Tab -->
            <div id="team-tasks" class="tab-content">
                <div class="content-grid">
                    <div class="content-card">
                        <h3>👥 All Team Tasks</h3>
                        <!-- Task Filter Bar -->
                        <div class="task-filter-bar" style="display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-bottom:18px;">
                        <select id="taskFilterPriority" style="padding:7px 12px;border:1px solid #e7f1fc;border-radius:8px;">
                            <option value="">All Priorities</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                        <select id="taskFilterAssignee" style="padding:7px 12px;border:1px solid #e7f1fc;border-radius:8px;">
                            <option value="">All Team Members</option>
                            <option value="SM">Sarah Miller</option>
                            <option value="AL">Alex Lee</option>
                            <option value="MJ">Mike Johnson</option>
                        </select>
                        <input id="taskFilterDueFrom" type="date" style="padding:7px 12px;border:1px solid #e7f1fc;border-radius:8px;" placeholder="Due after">
                        <input id="taskFilterDueTo" type="date" style="padding:7px 12px;border:1px solid #e7f1fc;border-radius:8px;" placeholder="Due before">
                        <button onclick="clearTaskFilters()" style="padding:8px 18px;margin-left:6px;background:#f7f7f7;color:#001f5a;border:1.5px solid #e7f1fc;border-radius:7px;cursor:pointer;">Clear Filters</button>
                        </div>
                        <div class="task-item high-priority" data-priority="high" data-assignee="SM" data-due="2024-05-01">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-details">
                                <div class="task-title">EU AI Act Implementation Plan</div>
                                <div class="task-description">Create comprehensive implementation plan for EU AI Act compliance</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-high">High</span>
                                    <span>Due: May 1, 2024</span>
                                    <div class="task-assignee">
                                        <span>Assigned to:</span>
                                        <div class="assignee-avatar">SM</div>
                                        <span>Sarah Miller</span>
                                    </div>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-btn">💬 Comment</button>
                                <button class="task-action-btn">📎 Attach</button>
                            </div>
                        </div>

                        <div class="task-item medium-priority" data-priority="medium" data-assignee="AL" data-due="2024-04-30">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-details">
                                <div class="task-title">Model Validation Documentation</div>
                                <div class="task-description">Document validation processes for all AI models in production</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-medium">Medium</span>
                                    <span>Due: Apr 30, 2024</span>
                                    <div class="task-assignee">
                                        <span>Assigned to:</span>
                                        <div class="assignee-avatar">AL</div>
                                        <span>Alex Lee</span>
                                    </div>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-btn">💬 Comment</button>
                                <button class="task-action-btn">📎 Attach</button>
                            </div>
                        </div>

                        <div class="task-item low-priority" data-priority="low" data-assignee="MJ" data-due="2024-05-05">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-details">
                                <div class="task-title">Training Material Updates</div>
                                <div class="task-description">Update compliance training materials with latest regulations</div>
                                <div class="task-meta">
                                    <span class="priority-badge priority-low">Low</span>
                                    <span>Due: May 5, 2024</span>
                                    <div class="task-assignee">
                                        <span>Assigned to:</span>
                                        <div class="assignee-avatar">MJ</div>
                                        <span>Mike Johnson</span>
                                    </div>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-btn">💬 Comment</button>
                                <button class="task-action-btn">📎 Attach</button>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3>📊 Task Analytics</h3>
                        <div style="margin-bottom: 20px;">
                            <canvas id="taskChart" width="400" height="200"></canvas>
                        </div>
                        <div class="task-meta" style="display: flex; justify-content: center; gap: 30px; margin-top: 15px;">
                            <span>📈 Completion Rate: 75%</span>
                            <span>⏰ Average Time: 3.2 days</span>
                            <span>🔥 Overdue Tasks: 2</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documents Tab -->
            <div id="documents" class="tab-content">
                <!-- Document Upload Area -->
                <div class="content-card full-width" style="margin-bottom: 30px;">
                    <h3>📤 Upload New Document</h3>
                    <div style="border: 2px dashed #e7f1fc; border-radius: 12px; padding: 30px; text-align: center; background: #f8f9fa; transition: all 0.3s ease;" 
                         onmouseover="this.style.borderColor='#001f5a'; this.style.background='#f0f9ff';" 
                         onmouseout="this.style.borderColor='#e7f1fc'; this.style.background='#f8f9fa';">
                        <div style="font-size: 3rem; margin-bottom: 15px; color: #001f5a;">📁</div>
                        <div style="font-size: 1.1rem; font-weight: 600; color: #001f5a; margin-bottom: 8px;">
                            Drag and drop files here or click to browse
                        </div>
                        <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 20px;">
                            Supports PDF, DOC, DOCX, XLS, XLSX files up to 10MB
                        </div>
                        <div style="display: flex; gap: 15px; justify-content: center; align-items: center; flex-wrap: wrap;">
                            <button class="action-button primary" onclick="document.getElementById('parserfileInput').click()">
                                📁 Browse Files
                            </button>
                            <input type="file" id="parserfileInput" multiple accept=".pdf,.doc,.docx,.xls,.xlsx" style="display: none;" onchange="handleFileUpload(event)">
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <select style="padding: 8px 12px; border: 1px solid #e7f1fc; border-radius: 8px; font-size: 0.9rem;">
                                    <option value="">Select Category</option>
                                    <option value="policies">📋 Policies</option>
                                    <option value="reports">📊 Reports</option>
                                    <option value="legal">⚖️ Legal</option>
                                    <option value="training">🎓 Training</option>
                                </select>
                                <select style="padding: 8px 12px; border: 1px solid #e7f1fc; border-radius: 8px; font-size: 0.9rem;">
                                    <option value="">Priority Level</option>
                                    <option value="high">🔴 High</option>
                                    <option value="medium">🟡 Medium</option>
                                    <option value="low">🟢 Low</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Upload Progress Area -->
                    <div id="uploadProgress" style="margin-top: 20px; display: none;">
                        <div style="background: #f0f9ff; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="font-weight: 500; color: #001f5a;">Uploading files...</span>
                                <span style="font-size: 0.9rem; color: #6b7280;" id="uploadStatus">0%</span>
                            </div>
                            <div style="background: #e5e7eb; border-radius: 4px; height: 8px; overflow: hidden;">
                                <div id="progressBar" style="background: linear-gradient(90deg, #001f5a, #2662fc); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <h3>📁 Recent Documents</h3>
                        <div class="document-item">
                            <div class="document-icon">📄</div>
                            <div class="document-info">
                                <div class="document-name">GDPR Compliance Report Q2 2024.pdf</div>
                                <div class="document-meta">Updated 2 hours ago • Sarah Miller • 2.3MB</div>
                            </div>
                            <div class="document-actions">
                                <button class="doc-action-btn">👁️ View</button>
                                <button class="doc-action-btn">⬇️ Download</button>
                            </div>
                        </div>

                        <div class="document-item">
                            <div class="document-icon">📊</div>
                            <div class="document-info">
                                <div class="document-name">AI Risk Assessment Framework.xlsx</div>
                                <div class="document-meta">Updated 1 day ago • Mike Johnson • 1.8MB</div>
                            </div>
                            <div class="document-actions">
                                <button class="doc-action-btn">👁️ View</button>
                                <button class="doc-action-btn">⬇️ Download</button>
                            </div>
                        </div>

                        <div class="document-item">
                            <div class="document-icon">📋</div>
                            <div class="document-info">
                                <div class="document-name">EU AI Act Implementation Guide.docx</div>
                                <div class="document-meta">Updated 3 days ago • Alex Lee • 5.2MB</div>
                            </div>
                            <div class="document-actions">
                                <button class="doc-action-btn">👁️ View</button>
                                <button class="doc-action-btn">⬇️ Download</button>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3>🗂️ Document Categories</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">📋</div>
                                <div style="font-weight: 600; color: #001f5a;">Policies</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">12 documents</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">📊</div>
                                <div style="font-weight: 600; color: #001f5a;">AI Descriptions</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">8 documents</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">⚖️</div>
                                <div style="font-weight: 600; color: #001f5a;">Legal</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">15 documents</div>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; margin-bottom: 8px;">🎓</div>
                                <div style="font-weight: 600; color: #001f5a;">Data Sets</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">6 documents</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Tab -->
            <div id="team" class="tab-content">
                <!-- Team Compliance Overview -->
                <div class="content-grid" style="margin-bottom: 30px;">
                    <div class="content-card">
                        <h3>🎯 Team Compliance Score</h3>
                        <div style="position: relative; margin: 15px auto; height: 160px; width: 160px; display: flex; align-items: center; justify-content: center;">
                            <canvas id="complianceScoreChart" width="140" height="140"></canvas>
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                <div style="font-size: 1.6rem; font-weight: 700; color: #001f5a;" id="scoreValue">87%</div>
                                <div style="font-size: 0.7rem; color: #0f3db5; text-transform: uppercase;">Compliance</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                            <div style="text-align: center; padding: 8px; background: #f0f9ff; border-radius: 6px;">
                                <div style="font-size: 1rem; font-weight: 600; color: #48bb78;">✅ 34</div>
                                <div style="font-size: 0.7rem; color: #6b7280;">Compliant</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: #fef7f0; border-radius: 6px;">
                                <div style="font-size: 1rem; font-weight: 600; color: #ed8936;">⚠️ 5</div>
                                <div style="font-size: 0.7rem; color: #6b7280;">Action Needed</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-card">
                        <h3>📊 Compliance Areas</h3>
                        <div style="margin: 15px 0; height: 140px;">
                            <canvas id="complianceBreakdownChart" width="350" height="140"></canvas>
                        </div>
                        <div style="margin-top: 15px; font-size: 0.85rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <span style="color: #374151;">GDPR Compliance</span>
                                <span style="font-weight: 600; color: #48bb78;">92%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <span style="color: #374151;">AI Act Readiness</span>
                                <span style="font-weight: 600; color: #ed8936;">78%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <span style="color: #374151;">Risk Management</span>
                                <span style="font-weight: 600; color: #48bb78;">95%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: #374151;">Documentation</span>
                                <span style="font-weight: 600; color: #2662fc;">85%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <h3>👥 Team Members</h3>
                        <div class="team-member-card">
                            <div class="member-avatar">SM</div>
                            <div class="member-info">
                                <div class="member-name">Sarah Miller</div>
                                <div class="member-role">Senior Compliance Manager</div>
                                <div class="member-status">Currently working on GDPR report</div>
                            </div>
                            <div class="status-indicator status-online"></div>
                        </div>

                        <div class="team-member-card">
                            <div class="member-avatar">MJ</div>
                            <div class="member-info">
                                <div class="member-name">Mike Johnson</div>
                                <div class="member-role">AI Risk Analyst</div>
                                <div class="member-status">Working on risk assessment framework</div>
                            </div>
                            <div class="status-indicator status-away"></div>
                        </div>

                        <div class="team-member-card">
                            <div class="member-avatar">AL</div>
                            <div class="member-info">
                                <div class="member-name">Alex Lee</div>
                                <div class="member-role">Legal Counsel</div>
                                <div class="member-status">Reviewing vendor contracts</div>
                            </div>
                            <div class="status-indicator status-online"></div>
                        </div>

                        <div class="team-member-card">
                            <div class="member-avatar">ES</div>
                            <div class="member-info">
                                <div class="member-name">Emily Stone</div>
                                <div class="member-role">Compliance Specialist</div>
                                <div class="member-status">Last active 2 hours ago</div>
                            </div>
                            <div class="status-indicator status-offline"></div>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3>📈 Team Activity</h3>
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-avatar">SM</div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Sarah Miller</strong> uploaded GDPR Compliance Report Q2 2024.pdf
                                    </div>
                                    <div class="activity-time">2 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-avatar">MJ</div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Mike Johnson</strong> completed task "Vendor Assessment"
                                    </div>
                                    <div class="activity-time">4 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-avatar">AL</div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Alex Lee</strong> commented on "EU AI Act Implementation"
                                    </div>
                                    <div class="activity-time">6 hours ago</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-avatar">ES</div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>Emily Stone</strong> updated training materials
                                    </div>
                                    <div class="activity-time">1 day ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Parser Tab -->
            <div id="parser" class="tab-content">
                <div class="content-card">
                    <h4>🔒 PII Redaction Parser</h4>
                    <div class="main-content">
                        <div class="upload-section">
                            <h5>Select Your Document</h5>
                            <div style="display: flex; align-items: center; justify-content: center; gap: 48px; margin-bottom: 8px;">
                            <!-- Choose File Button -->
                            <div>
                                <input type="file" id="parserfileInput" class="file-input" accept=".txt,.csv,.json" required style="display:none;">
                                <label for="parserfileInput" class="file-upload-label">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                Choose Document
                                </label>
                            </div>
                            <!-- Centered Document SVG Icon -->
                            <div>
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width:54px;height:54px;display:block;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                            </div>
                            <!-- Scan for PII Button -->
                            <div>
                                <button type="button" class="upload-btn" id="processBtn" disabled>
                                🔍 Scan for PII
                                </button>
                            </div>
                            </div>
                            <div id="fileName" class="file-name"></div>
                            <div class="supported-formats">
                            <strong>Supported:</strong> .pdf, .txt, .csv, .json &nbsp; <em>Processing is 100% local.</em>
                            </div>
                        </div>

                        <div class="loading" id="loading">
                            <div class="spinner"></div>
                            <p>Analyzing...</p>
                        </div>
                        <div class="results-section" id="resultsSection">
                            <div class="results-header">
                            <h5 class="results-title">📊 Analysis Results</h5>
                            <button id="downloadBtn" class="download-btn" style="display:none;">
                                📥 Download
                            </button>
                            </div>
                            <div class="stats-grid" id="statsGrid">
                            <div class="stat-card">
                                <div class="stat-number" id="entitiesFound">0</div>
                                <div class="stat-label">PII Entities</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="charactersRedacted">0</div>
                                <div class="stat-label">Redacted</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="documentLength">0</div>
                                <div class="stat-label">Doc Length</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="redactionPercentage">0%</div>
                                <div class="stat-label">Redaction %</div>
                            </div>
                            </div>
                            <div class="report-content" id="report"></div>
                        </div>
                        <div class="security-note">
                            <strong>🛡️ Privacy & Security:</strong>
                            Files never leave your browser/device.
                        </div>
                    </div>
                </div>
            </div>


            <!-- Chatbot Tab -->
            <div id="chatbot" class="tab-content">
                <div class="content-card full-width" style="padding:60px 40px; display:flex;flex-direction:column;align-items:center;justify-content:center;">
                    <h3 style="margin-bottom:24px; color:#001f5a;">
                        💬 AI Compliance Assistant
                    </h3>
                    <p style="margin-bottom:30px;font-size:1.08rem;color:#0f3db5;">
                        Launch our advanced chatbot in a separate window to get compliance answers and more.
                    </p>
                   <button 
                        class="action-button primary" 
                        style="font-size:1.15rem;padding:16px 48px;" 
                        onclick="window.open('chatbot.html', '_blank', 'noopener noreferrer')">
                        🚀 Launch External Chatbot
                    </button>
                    <div style="margin-top:28px;font-size:0.91rem;color:#6b7280;">
                        This will open a secure chat assistant in a new browser tab.
                    </div>
                </div>
            </div>

 <!-- Panels Tab -->
            <div id="panels" class="tab-content">
                <div class="content-card full-width" style="padding:60px 40px; display:flex;flex-direction:column;align-items:center;justify-content:center;">
                    <h3 style="margin-bottom:24px; color:#001f5a;">
                        🎛️ Panels
                    </h3>
                    <p style="margin-bottom:30px;font-size:1.08rem;color:#0f3db5;">
                        Get more detailed information about datasets and whether they are compliant.
                    </p>
                    <button 
                        class="action-button primary" 
                        style="font-size:1.15rem;padding:16px 48px;" 
                        onclick="window.open('https://aitools-dev.us-east-1.bfcp.dev.npd.bfsaws.net/aitoys.html?tool=Panels&code=O633X8', '_blank', 'noopener noreferrer')"
                    >
                        🚀 Launch External Panels
                    </button>
                    <div style="margin-top:28px;font-size:0.91rem;color:#6b7280;">
                        This will open the Panels tool in a new browser tab.
                    </div>
                </div>
            </div>

    <script>
        // Tab functionality
        function showTab(tabId) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Initialize chart if team-tasks tab is selected
            if (tabId === 'team-tasks') {
                setTimeout(() => initializeTaskChart(), 100);
            }
            
            // Initialize compliance charts if team tab is selected
            if (tabId === 'team') {
                setTimeout(() => initializeComplianceCharts(), 100);
            }
        }

        // Modal functions (placeholder implementations)
        function showCreateTaskModal() {
            alert('Create Task Modal would open here');
        }

        function showUploadModal() {
            alert('Upload Document Modal would open here');
        }

        // Initialize task chart
        function initializeTaskChart() {
            const ctx = document.getElementById('taskChart');
            if (!ctx) return;
            
            // Destroy existing chart if it exists
            if (window.taskChartInstance) {
                window.taskChartInstance.destroy();
            }
            
            window.taskChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'In Progress', 'Pending', 'Overdue'],
                    datasets: [{
                        data: [15, 12, 8, 2],
                        backgroundColor: [
                            '#48bb78',
                            '#2662fc',
                            '#ed8936',
                            '#f56565'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Add drag and drop functionality to upload area
            setupDragAndDrop();
            console.log('AI Compliance Hub Dashboard loaded successfully');
        });

        // Handle file upload
        function handleFileUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                simulateUpload(files);
            }
        }

        // Setup drag and drop functionality
        function setupDragAndDrop() {
            const uploadArea = document.querySelector('[onmouseover]');
            if (!uploadArea) return;

            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
                document.body.addEventListener(eventName, preventDefaults, false);
            });

            // Highlight drop area when item is dragged over it
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, unhighlight, false);
            });

            // Handle dropped files
            uploadArea.addEventListener('drop', handleDrop, false);

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            function highlight(e) {
                uploadArea.style.borderColor = '#001f5a';
                uploadArea.style.background = '#f0f9ff';
            }

            function unhighlight(e) {
                uploadArea.style.borderColor = '#e7f1fc';
                uploadArea.style.background = '#f8f9fa';
            }

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                simulateUpload(files);
            }
        }

        // Handle PII document upload
        function handlePIIUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                simulatePIIProcessing(files);
            }
        }

        // Simulate PII processing with progress
        function simulatePIIProcessing(files) {
            const statusContainer = document.getElementById('piiProcessingStatus');
            const progressBar = document.getElementById('piiProgressBar');
            const statusText = document.getElementById('piiStatus');

            if (!statusContainer || !progressBar || !statusText) return;

            // Show processing status
            statusContainer.style.display = 'block';
            
            let progress = 0;
            const stages = [
                'Scanning document structure...',
                'Detecting personal names...',
                'Finding addresses and locations...',
                'Identifying phone numbers...',
                'Locating email addresses...',
                'Searching for SSN/ID numbers...',
                'Applying redactions...',
                'Finalizing document...'
            ];
            
            let stageIndex = 0;
            
            const interval = setInterval(() => {
                progress += Math.random() * 12;
                
                // Update stage text
                if (progress > (stageIndex + 1) * 12.5 && stageIndex < stages.length - 1) {
                    stageIndex++;
                    statusText.textContent = stages[stageIndex];
                }
                
                if (progress > 100) {
                    progress = 100;
                    statusText.textContent = 'Processing complete!';
                    clearInterval(interval);
                    
                    // Hide processing status after completion
                    setTimeout(() => {
                        statusContainer.style.display = 'none';
                        addProcessedDocument(files[0]);
                        
                        // Reset file input
                        document.getElementById('piiFileInput').value = '';
                    }, 1000);
                }
                
                progressBar.style.width = progress + '%';
            }, 300);
        }

        // Add a new processed document to the list
        function addProcessedDocument(file) {
            const container = document.getElementById('processedDocuments');
            if (!container) return;

            const piiTypes = ['Names', 'Addresses', 'Phone Numbers', 'Email Addresses', 'SSN'];
            const detectedPII = piiTypes.slice(0, Math.floor(Math.random() * 3) + 2); // Random 2-4 types
            const piiCount = Math.floor(Math.random() * 15) + 1; // Random 1-15 items

            const documentHTML = `
                <div class="document-item" style="border-left: 4px solid #48bb78;">
                    <div class="document-icon">🛡️</div>
                    <div class="document-info">
                        <div class="document-name">${file.name.replace(/\.[^/.]+$/, "")}_REDACTED${file.name.match(/\.[^/.]+$/) || ''}</div>
                        <div class="document-meta">
                            Processed just now • 
                            <span style="color: #48bb78; font-weight: 500;">✅ ${piiCount} PII items removed</span> • 
                            Original: ${(file.size / (1024 * 1024)).toFixed(1)}MB → Redacted: ${(file.size / (1024 * 1024) * 0.95).toFixed(1)}MB
                        </div>
                        <div style="margin-top: 8px;">
                            ${detectedPII.map(type => 
                                `<span style="background: #bbf7d0; color: #059669; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; margin-right: 8px;">${type}</span>`
                            ).join('')}
                        </div>
                    </div>
                    <div class="document-actions">
                        <button class="doc-action-btn" style="background: #48bb78; color: white; border-color: #48bb78;" onclick="downloadRedacted('${file.name}')">⬇️ Download Redacted</button>
                        <button class="doc-action-btn">👁️ Compare</button>
                    </div>
                </div>
            `;

            // Insert at the beginning of the list
            container.insertAdjacentHTML('afterbegin', documentHTML);
        }

        // Download redacted file (simulation)
        function downloadRedacted(filename) {
            alert(`Downloading redacted version of: ${filename.replace(/\.[^/.]+$/, "")}_REDACTED${filename.match(/\.[^/.]+$/) || ''}`);
        }

        // Initialize compliance score and breakdown charts
        function initializeComplianceCharts() {
            // Compliance Score Doughnut Chart
            const scoreCtx = document.getElementById('complianceScoreChart');
            if (scoreCtx) {
                new Chart(scoreCtx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [87, 13],
                            backgroundColor: [
                                '#48bb78',
                                '#e5e7eb'
                            ],
                            borderWidth: 0,
                            cutout: '70%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });
            }

            // Compliance Breakdown Bar Chart
            const breakdownCtx = document.getElementById('complianceBreakdownChart');
            if (breakdownCtx) {
                new Chart(breakdownCtx, {
                    type: 'bar',
                    data: {
                        labels: ['GDPR', 'AI Act', 'Risk Mgmt', 'Docs'],
                        datasets: [{
                            data: [92, 78, 95, 85],
                            backgroundColor: [
                                '#48bb78',
                                '#ed8936', 
                                '#48bb78',
                                '#2662fc'
                            ],
                            borderRadius: 4,
                            borderSkipped: false,
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    display: true,
                                    color: '#e5e7eb'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    },
                                    font: {
                                        size: 10
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
    </script>
    <script src="parser.js"></script>
    <script>
        const parserfileInput = document.getElementById('parserfileInput');
        const fileName = document.getElementById('fileName');
        const processBtn = document.getElementById('processBtn');
        const loading = document.getElementById('loading');
        const resultsSection = document.getElementById('resultsSection');
        const downloadBtn = document.getElementById('downloadBtn');

        let currentFile = null;
        let currentResults = null;
        let parser = new DocumentPIIParser();

        // File input handling
        parserfileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            currentFile = file;
            fileName.textContent = `📄 ${file.name} (${formatFileSize(file.size)})`;
            fileName.style.display = 'block';
            processBtn.disabled = false;
        } else {
            currentFile = null;
            fileName.style.display = 'none';
            processBtn.disabled = true;
        }
        });

        // Process button handling
        processBtn.addEventListener('click', async function() {
        if (!currentFile) return;
        
        showLoading();
        
        try {
            const results = await parser.processDocument(currentFile);
            currentResults = results;
            showResults(results);
        } catch (error) {
            hideLoading();
            showError(error.message);
            console.error('Processing error:', error);
        }
        });

        // Download button handling
        downloadBtn.addEventListener('click', function() {
        if (currentResults && currentFile) {
            parser.downloadRedactedFile(currentResults.redactedText, currentFile.name);
        }
        });

        function showLoading() {
        loading.style.display = 'block';
        resultsSection.style.display = 'none';
        processBtn.disabled = true;
        processBtn.textContent = 'Processing...';
        
        // Reset stats to show processing state
        resetStats();
        }

        function hideLoading() {
        loading.style.display = 'none';
        processBtn.disabled = false;
        processBtn.textContent = '🔍 Scan for PII';
        }
        
        function resetStats() {
        document.getElementById('entitiesFound').textContent = '0';
        document.getElementById('charactersRedacted').textContent = '0';
        document.getElementById('documentLength').textContent = '0';
        document.getElementById('redactionPercentage').textContent = '0%';
        }

        function showResults(data) {
        hideLoading();
        
        // Update statistics with proper fallbacks and validation
        const entitiesFound = data.piiEntitiesFound || 0;
        const charactersRedacted = Math.max(0, data.charactersRedacted || 0);
        const documentLength = Math.max(1, data.originalLength || 0);
        
        // Ensure redacted characters never exceeds document length
        const validatedCharactersRedacted = Math.min(charactersRedacted, documentLength);
        
        // Calculate redaction percentage
        const redactionPercentage = documentLength > 0 
            ? ((validatedCharactersRedacted / documentLength) * 100).toFixed(1)
            : 0;
        
        document.getElementById('entitiesFound').textContent = entitiesFound;
        document.getElementById('charactersRedacted').textContent = formatNumber(validatedCharactersRedacted);
        document.getElementById('documentLength').textContent = formatNumber(documentLength);
        document.getElementById('redactionPercentage').textContent = redactionPercentage + '%';

        // Show report
        document.getElementById('report').textContent = data.report || 'No report available';

        // Show download button
        downloadBtn.style.display = 'inline-block';

        // Show results section
        resultsSection.style.display = 'block';
        
        // Scroll to results
        resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

        // Show success message with proper pluralization
        if (entitiesFound > 0) {
            const entityText = entitiesFound === 1 ? 'entity' : 'entities';
            showMessage(`✅ Successfully found and redacted ${entitiesFound} PII ${entityText}!`, 'success');
        } else {
            showMessage('✅ No PII entities found in your document. Your document is clean!', 'success');
        }
        
        // Log data for debugging
        console.log('Processing results:', {
            entitiesFound,
            charactersRedacted: validatedCharactersRedacted,
            documentLength,
            redactionPercentage: redactionPercentage + '%',
            processingTime: data.processingTime,
            hasRedactedText: !!data.redactedText
        });
        }

        function showError(message) {
        showMessage('❌ Error: ' + message, 'error');
        resultsSection.style.display = 'none';
        }

        function showMessage(message, type) {
        // Remove existing messages
        const existingMessages = document.querySelectorAll('.error-message, .success-message');
        existingMessages.forEach(msg => msg.remove());

        // Create new message
        const messageDiv = document.createElement('div');
        messageDiv.className = type === 'error' ? 'error-message' : 'success-message';
        messageDiv.textContent = message;

        // Insert after upload section
        const uploadSection = document.querySelector('.upload-section');
        uploadSection.parentNode.insertBefore(messageDiv, uploadSection.nextSibling);

        // Auto-remove success messages after 5 seconds
        if (type === 'success') {
            setTimeout(() => {
            if (messageDiv.parentNode) {
                messageDiv.remove();
            }
            }, 5000);
        }
        }

        function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function formatNumber(num) {
        return num.toLocaleString();
        }
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
    // Init filter event listeners
    ['taskFilterPriority','taskFilterAssignee','taskFilterDueFrom','taskFilterDueTo'].forEach(function(id) {
        const el = document.getElementById(id);
        if (el) el.addEventListener('change', filterTeamTasks);
    });
    });

    function filterTeamTasks() {
    const priority = document.getElementById('taskFilterPriority').value;
    const assignee = document.getElementById('taskFilterAssignee').value;
    const dueFrom = document.getElementById('taskFilterDueFrom').value;
    const dueTo = document.getElementById('taskFilterDueTo').value;
    const items = document.querySelectorAll('#team-tasks .task-item');

    items.forEach(function(item) {
        let visible = true;

        // priority
        if(priority && item.getAttribute('data-priority')!==priority)
        visible = false;

        // assignee
        if(assignee && item.getAttribute('data-assignee')!==assignee)
        visible = false;

        // due date
        let dueVal = item.getAttribute('data-due');
        if (dueFrom && dueVal < dueFrom) visible = false;
        if (dueTo && dueVal > dueTo) visible = false;

        item.style.display = visible ? '' : 'none';
    });
    }

    function clearTaskFilters() {
    document.getElementById('taskFilterPriority').value = '';
    document.getElementById('taskFilterAssignee').value = '';
    document.getElementById('taskFilterDueFrom').value = '';
    document.getElementById('taskFilterDueTo').value = '';
    filterTeamTasks();
    }
</script>
</body>
</html>
